<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Grimle</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Quicksand:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0d0d0d;
            --card-bg: #ffffff;
            --text-main: #2c2c2c;
        }

        body {
            margin: 0; padding: 0;
            display: flex; justify-content: center; align-items: center;
            height: 100vh;
            background: radial-gradient(circle, #2c2c2c 0%, #000000 100%);
            font-family: 'Quicksand', sans-serif;
            overflow: hidden;
        }

        /* Animasi Kelopak Putih Jatuh */
        .petals {
            position: absolute; width: 100%; height: 100%;
            z-index: 1; pointer-events: none;
        }

        .petal {
            position: absolute;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 150% 0 150% 0;
            animation: falling 10s infinite linear;
        }

        @keyframes falling {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.5; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        /* Container Utama diturunkan agar tidak mentok atas */
        .main-container {
            position: relative;
            margin-top: 150px; 
            z-index: 10;
        }

        .envelope-wrapper {
            position: relative;
            cursor: pointer;
            perspective: 1000px;
        }

        .envelope {
            position: relative;
            width: 300px; height: 200px;
            background: #333;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }

        /* Penutup Amplop */
        .envelope::before {
            content: ''; position: absolute; top: 0; z-index: 4;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 120px solid #444;
            transform-origin: top;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .envelope.open::before {
            transform: rotateX(180deg);
            z-index: 0;
        }

        /* Stempel Foto Bundar */
        .photo-stamp {
            position: absolute;
            bottom: -15px;
            right: -15px;
            width: 75px;
            height: 75px;
            border-radius: 50%;
            border: 3px solid #fff;
            background-image: url('https://i.ibb.co.com/R4y0t4wq/Frerro.jpg');
            background-size: cover;
            background-position: center;
            z-index: 6;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            transition: 0.5s;
        }

        .envelope.open .photo-stamp {
            transform: scale(1.1);
        }

        /* Kertas Surat */
        .letter {
            position: absolute; 
            bottom: 5px; 
            left: 10px;
            width: 280px; 
            height: 180px;
            background: white;
            border-radius: 5px;
            padding: 20px;
            box-sizing: border-box;
            transition: all 0.8s ease-in-out;
            z-index: 2;
            opacity: 0;
        }

        /* Posisi terbuka yang pas (tidak terlalu tinggi) */
        .envelope.open .letter {
            transform: translateY(-170px); 
            height: 400px; 
            opacity: 1;
            z-index: 5;
            box-shadow: 0 0 30px rgba(255,255,255,0.1);
        }

        .letter-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.1rem;
            color: var(--text-main);
            line-height: 1.6;
            text-align: left;
            overflow-y: auto;
            max-height: 100%;
        }

        .hint {
            position: absolute; bottom: -80px; width: 100%;
            text-align: center; color: white;
            font-size: 0.7rem; letter-spacing: 3px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        .music-btn {
            position: fixed; bottom: 20px; right: 20px;
            background: rgba(255,255,255,0.05); color: #fff;
            border: 1px solid rgba(255,255,255,0.2);
            padding: 10px 20px; border-radius: 50px;
            cursor: pointer; z-index: 100; backdrop-filter: blur(10px);
            font-size: 0.75rem;
        }
    </style>
</head>
<body>

    <div class="petals" id="petals"></div>

    <div class="main-container">
        <div class="envelope-wrapper" onclick="openLetter()">
            <div class="envelope" id="envelope">
                <div class="photo-stamp"></div>
                <div class="letter">
                    <div class="letter-text" id="typewriter"></div>
                </div>
            </div>
            <div class="hint" id="hint">CLICK TO READ ‚úâ</div>
        </div>
    </div>

    <button class="music-btn" onclick="toggleMusic()">üéµ Play Mood</button>
    <audio id="bgMusic" loop>
        <source src="https://www.bensound.com/bensound-music/bensound-love.mp3" type="audio/mpeg">
    </audio>

    <script>
        const message = `I wasn't even planning to write something this long, but here we are. I just kinda felt like you deserve more than a dry "happy valentine's" text. I dont know what we are yet, and I'm not trying to rush anything.\n\nBut I do know that talking to you makes my days lighter. You make me smile randomly at my phone like an idiot. And honestly? That's rare. You have this calm energy about you, but at the same time you make my heart race a little. Its confusing in a good way. \n\n Babe, I don't really do 'mushy,' but I definitely do 'you.' You‚Äôve got this way of making everything else seem lowkey boring compared to our conversations. I really vibe with how you challenge me, its rare to find someone who can actually keep up. Just wanted to let you know you‚Äôre my favorite distraction and I'm definitely planning on keeping you around for a long time.\n\nI like how you think, how you talk, how you exist. Yeah‚Ä¶ exist. That sounded dramatic but whatever, it's Valentine's Day. Im not gonna sit here and act like I don't care, because i do. Maybe more than I should. But it feels nice. It feels real. And even if we're still in that "figuring things out" phase, I just want you to know that you matter to me.\n\nI hope today treats you gently. I hope you feel appreciated. And if no one told you this yet you're special. At least to me.\n\nHappy Valentine's Day, Grimle.\nDon't let it get to your head though\n\n With Love, Sarn Jos√©.`;

        let i = 0;
        let isTyping = false;

        function openLetter() {
            const env = document.getElementById('envelope');
            const hint = document.getElementById('hint');
            if(!env.classList.contains('open')) {
                env.classList.add('open');
                hint.style.display = 'none';
                if(!isTyping) {
                    isTyping = true;
                    setTimeout(typeWriter, 1000);
                }
            }
        }

        function typeWriter() {
            if (i < message.length) {
                const char = message.charAt(i);
                document.getElementById("typewriter").innerHTML += char === '\n' ? '<br>' : char;
                i++;
                setTimeout(typeWriter, 50); 
                
                // Auto scroll ke bawah agar teks yang sedang diketik tetap terlihat
                const letterText = document.getElementById("typewriter");
                letterText.scrollTop = letterText.scrollHeight;
            }
        }

        // Membuat animasi kelopak bunga
        function createPetals() {
            const container = document.getElementById('petals');
            setInterval(() => {
                const petal = document.createElement('div');
                petal.className = 'petal';
                const size = Math.random() * 8 + 4;
                petal.style.width = size + 'px';
                petal.style.height = (size + 4) + 'px';
                petal.style.left = Math.random() * 100 + 'vw';
                petal.style.animationDuration = Math.random() * 5 + 7 + 's';
                container.appendChild(petal);
                setTimeout(() => petal.remove(), 10000);
            }, 600);
        }
        createPetals();

        // Fungsi Musik
        const music = document.getElementById('bgMusic');
        function toggleMusic() {
            if (music.paused) {
                music.play();
                document.querySelector('.music-btn').innerText = "‚è∏ Pause Music";
            } else {
                music.pause();
                document.querySelector('.music-btn').innerText = "üéµ Play Mood";
            }
        }
    </script>
</body>
</html>
